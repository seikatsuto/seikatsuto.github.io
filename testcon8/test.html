<!DOCTYPE html>
<html>
<body>
<button onclick="send()">送信</button>
<pre id="out"></pre>

<script>
const USER="seikatsuto";
const REPO="testcon8";
//const TOKEN="ghp_あなたのトークン";
const TOKEN = "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";   // ghp_xxxxxxxxxxxxxxxxxトークン

async function send(){
 const out=document.getElementById("out");
 out.textContent="送信中...\n";

 const content=btoa("test "+new Date());

 try{
  const res=await fetch(
   `https://api.github.com/repos/${USER}/${REPO}/contents/kiosk_test.txt`,
   {
    method:"PUT",
    headers:{
     "Authorization":"token "+TOKEN,
     "Content-Type":"application/json"
    },
    body:JSON.stringify({
     message:"kiosk test",
     content:content
    })
   }
  );
  out.textContent+="status="+res.status+"\n";
  out.textContent+=await res.text();
 }catch(e){
  out.textContent+="通信失敗:\n"+e;
 }
}
</script>
</body>
</html>

