<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>å­¦ç¿’ã‚¹ã‚¿ãƒ¼ãƒˆ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  margin: 0;
  padding: 20px;
  background: #f4f6f8;
  color: #222;
}

h1 {
  text-align: center;
  margin-bottom: 16px;
}

/* ===== åå‰é¸æŠ ===== */
#childArea {
  text-align: center;
  margin-bottom: 20px;
}

.child-btn {
  padding: 12px 18px;
  margin: 6px;
  font-size: 18px;
  border-radius: 10px;
  border: 2px solid #888;
  background: #f0f0f0;
  cursor: pointer;
  transition: all 0.2s ease;
}

.child-btn.active {
  background: #4CAF50;
  color: #fff;
  border-color: #2e7d32;
}

/* é¸æŠå‰ã®ç‚¹æ»… */
.blink {
  animation: blink 1.2s infinite;
}

@keyframes blink {
  0%   { opacity: 1; }
  50%  { opacity: 0.4; }
  100% { opacity: 1; }
}

/* ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */
#message {
  margin-top: 16px;
  font-size: 1.1em;
  text-align: center;
  min-height: 1.5em;
}

/* ===== ãƒªãƒ³ã‚¯ ===== */
ul {
  padding-left: 20px;
}

li {
  margin: 6px 0;
}

a {
  text-decoration: none;
  font-size: 1.05em;
  color: #0066cc;
}

a:active {
  color: #003366;
}
</style>
</head>

<body>

<h1>ğŸ“˜ ãƒ‰ãƒ©ã¡ã‚ƒã‚“ã®å­¦ç¿’éƒ¨å±‹</h1>

<!-- åå‰é¸æŠ -->
<div id="childArea">
  <p id="prompt" class="blink">ğŸ‘‡ ãã¿ã®åå‰ã‚’ãˆã‚‰ã‚“ã§ã­</p>

  <button class="child-btn" onclick="setChild(this, 'æƒŸäºº')">æƒŸäºº</button>
  <button class="child-btn" onclick="setChild(this, 'æƒºå¤ªéƒ')">æƒºå¤ªéƒ</button>
  <button class="child-btn" onclick="setChild(this, 'æ—¥èŠ±é‡Œ')">æ—¥èŠ±é‡Œ</button>
  <button class="child-btn" onclick="setChild(this, 'å•“äºº')">å•“äºº</button>

  <div id="message"></div>
</div>

<hr>

<!-- å­¦ç¿’ãƒªãƒ³ã‚¯ï¼ˆä¾‹ï¼‰ -->
<h2>ğŸ“– ç®—æ•°</h2>
<ul>
  <li><a href="player.html?v=m5zWD0b6Qtk">å°1 ç®—æ•° ãã‚Šä¸ŠãŒã‚Šã®ãŸã—ã–ã‚“</a></li>
  <li><a href="player.html?v=LbYijVgaqhs">å°1 ç®—æ•° æ™‚è¨ˆã®ã‚ˆã¿ã‹ãŸ</a></li>
</ul>

<hr>

<!-- å±¥æ­´è¡¨ç¤º -->
<h3>ğŸ•’ å­¦ç¿’å±¥æ­´</h3>
<button onclick="showLogs()">å±¥æ­´ã‚’è¡¨ç¤º</button>

<table id="logTable" style="display:none; width:100%; border-collapse:collapse;">
  <thead>
    <tr>
      <th>åå‰</th>
      <th>å‹•ç”»</th>
      <th>é–‹å§‹</th>
      <th>çµ‚äº†</th>
      <th>åˆ†</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
/* ===== åå‰é¸æŠ ===== */
function setChild(btn, name) {
  document.querySelectorAll('.child-btn').forEach(b => {
    b.classList.remove('active');
  });

  btn.classList.add('active');
  localStorage.setItem("childName", name);

  document.getElementById("prompt").style.display = "none";
  document.getElementById("message").textContent =
    name + "ãã‚“ã€ã„ã£ã—ã‚‡ã«ãŒã‚“ã°ã‚ã†ï¼ğŸ“º";
}

/* åˆæœŸåŒ–ï¼ˆå†è¨ªå•æ™‚ï¼‰ */
window.addEventListener("load", () => {
  const saved = localStorage.getItem("childName");
  if (!saved) return;

  document.querySelectorAll('.child-btn').forEach(btn => {
    if (btn.textContent === saved) {
      btn.classList.add('active');
    }
  });

  document.getElementById("prompt").style.display = "none";
  document.getElementById("message").textContent =
    saved + "ãã‚“ã€ã¤ã¥ãã‹ã‚‰ã¯ã˜ã‚ã‚ˆã†ï¼";
});

/* ===== å±¥æ­´è¡¨ç¤º ===== */
function showLogs() {
  const logs = JSON.parse(localStorage.getItem("studyLog") || "[]");
  const table = document.getElementById("logTable");
  const tbody = table.querySelector("tbody");
  tbody.innerHTML = "";

  logs.forEach(l => {
    if (!l.leave) return;

    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${l.child}</td>
      <td>${l.video || "-"}</td>
      <td>${new Date(l.enter).toLocaleString()}</td>
      <td>${new Date(l.leave).toLocaleString()}</td>
      <td>${Math.round(
        (new Date(l.leave) - new Date(l.enter)) / 60000
      )}</td>
    `;
    tbody.appendChild(tr);
  });

  table.style.display = "table";
}
</script>

</body>
</html>
